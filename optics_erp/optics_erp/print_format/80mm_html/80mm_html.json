{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-09-08 20:06:14.225246",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Refraction",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "\r\n{# RTL support if your site language is Arabic #}\r\n{% set is_rtl = (frappe.lang or 'en').startswith('arr') %}\r\n{% set mobile_no = frappe.db\r\n\t\t\t\t\t.get_value(\"Customer\", doc.customer, [\r\n\t\t\t\t\t\t\"mobile_no\",\r\n\t\t\t\t\t])%}\r\n<style>\r\n\r\n\r\n  @media print, screen {\r\n    @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap');\r\n    @page { size: 80mm auto; margin: 0.01mm; }\r\n    \r\n    body { width: 65mm; font-size: 14px; line-height: 1.35; direction: {{ 'rtl' if is_rtl else 'ltr' }};}\r\n    .print-format div, .print-format td, .print-format span { font-family: \"Roboto\", sans-serif;}\r\n    \r\n  }\r\n  .h     { font-weight: 600; font-size: 14px; }\r\n  .muted { color: #555; }\r\n  .rowline { display:flex; justify-content:space-between; }\r\n  .rowline > div { max-width: 100%; }\r\n  .rule  { border-top: 1px solid #000; margin: 6px 0; }\r\n   .action-banner {display: none;}\r\n    .print-format-gutter {padding: 0;}\r\n    .print-format {padding: 0px;}\r\n\r\n  table.rx {\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n    table-layout: fixed;\r\n    margin-top: 6px;\r\n  }\r\n  table.rx th, table.rx td {\r\n    border: 1px solid #000;\r\n    padding: 2px 2px;\r\n    text-align: left;\r\n    word-wrap: break-word;\r\n    font-weight: 800;\r\n    font-size: 16px;\r\n  }\r\n  table.rx thead th {\r\n    background: #f0f0f0;\r\n  }\r\n  .leftcol { text-align: {{ 'right' if is_rtl else 'left' }}; }\r\n  .letter-head img, .letter-foot img { max-width:100%; height:auto; }\r\n  /* keep it inside 80mm */\r\n  .letter-head, .letter-foot { width:100%; margin: 5px 0; }\r\n</style>\r\n\r\n<!-- Header / meta exactly like your sketch -->\r\n{# pick a letter head: from doc if present; else default for company #}\r\n{% set lh_name = (doc.letter_head if doc.get('letter_head') else\r\n                  frappe.db.get_value('Company', doc.company, 'default_letter_head')) %}\r\n{% if lh_name %}\r\n  {% set lh = frappe.get_doc('Letter Head', lh_name) %}\r\n  <div class=\"letter-head\">{{ lh.content | safe }}</div>\r\n{% endif %}\r\n<div class=\"rowline\">\r\n  <div>\r\n      <div class='h'><span class=\"h\">{{ _('Patient name') }}:</span>\r\n      {{ doc.customer_name or doc.customer or '--' }}</div>\r\n    <div class=\"h\"><span class=\"h\">{{ _('Phone number') }}:</span> {{ mobile_no }}</div>\r\n    <div class='h'><span class=\"h\">{{ _('Refraction date') }}:</span>\r\n      {{ frappe.format_date(doc.refraction_date) if doc.refraction_date else '--' }}</div>\r\n      <div class='h'> {{_('Print date')}}: {{frappe.format_date(frappe.utils.now())}}</div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Main table like the hand-drawn layout -->\r\n<table class=\"rx\">\r\n  <thead>\r\n    <tr>\r\n      <th class=\"leftcol\">{{ _('Eye') }}</th>\r\n      <th>{{ _('R') }}</th>\r\n      <th>{{ _('L') }}</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <th class=\"leftcol\">SPH</th>\r\n      <td>{%if doc.right_sph > 0%}\r\n      {{\"+\" ~ doc.right_sph}}\r\n        {%elif doc.right_sph <=0%}\r\n        {{doc.right_sph}}\r\n        {%else%}\r\n         {{'--'}}\r\n        {%endif%}</td>\r\n        <td>{%if doc.left_sph > 0%}\r\n      {{\"+\" ~ doc.left_sph}}\r\n        {%elif doc.left_sph <=0%}\r\n        {{doc.left_sph}}\r\n        {%else%}\r\n         {{'--'}}\r\n        {%endif%}</td>\r\n    </tr>\r\n    <tr>\r\n      <th class=\"leftcol\">CYL</th>\r\n      <td>{{ doc.right_cyl  if doc.right_cyl  is not none else '--' }}</td>\r\n      <td>{{ doc.left_cyl   if doc.left_cyl   is not none else '--' }}</td>\r\n    </tr>\r\n    <tr>\r\n      <th class=\"leftcol\">{{ _('Axis') }}</th>\r\n      <td>{{ doc.right_axis if (doc.right_axis is not none and doc.right_cyl !=0) else '--' }}</td>\r\n      <td>{{ doc.left_axis  if (doc.left_axis  is not none and doc.left_cyl !=0) else '--' }}</td>\r\n    </tr>\r\n    <tr>\r\n      <th class=\"leftcol\">ADD</th>\r\n      <td>{{ '+' ~ doc.right_add  if (doc.right_add is not none and doc.right_add != 0) else '--' }}</td>\r\n      <td>{{ '+' ~ doc.left_add   if (doc.left_add   is not none and doc.left_add != 0) else '--' }}</td>\r\n    </tr>\r\n    <tr>\r\n      <th class=\"leftcol\">VAsc</th>\r\n      <td>{{ doc.right_va_sc_decimal if doc.right_va_sc_decimal is not none else '--' }}</td>\r\n      <td>{{ doc.left_va_sc_decimal  if doc.left_va_sc_decimal  is not none else '--' }}</td>\r\n    </tr>\r\n    <tr>\r\n      <th class=\"leftcol\">VAcc</th>\r\n      <td>{{ doc.right_va_cc_decimal if doc.right_va_cc_decimal is not none else '--' }}</td>\r\n      <td>{{ doc.right_va_cc_decimal  if doc.right_va_cc_decimal  is not none else '--' }}</td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n\r\n{% if doc.notes %}\r\n  <div class=\"rule\"></div>\r\n  <div><span class=\"h\">{{ _('Notes') }}:</span> {{ (doc.notes | striptags) }}</div>\r\n{% endif %}\r\n\r\n<!-- Empty box for handwritten notes -->\r\n<div class=\"rule\"></div>\r\n<div style=\"border:1px solid #000; height:120px; margin-top:8px; padding:4px;\">\r\n  {{ _('Custom Notes:') }}\r\n</div>\r\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-09-21 12:22:59.379703",
 "modified_by": "Administrator",
 "module": "Optics ERP",
 "name": "80mm html",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}