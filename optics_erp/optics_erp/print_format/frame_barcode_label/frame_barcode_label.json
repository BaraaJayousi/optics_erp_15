{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-10-17 20:01:38.488576",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Item",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<style>\r\n    @media print, screen{\r\n        @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap');\r\n        @page { size: 70mm 18mm; margin: 0mm 0; marks: none;   }\r\n        /* eliminate any outline Chrome draws on first printable element */\r\n        * {\r\n            outline: none !important;\r\n         }\r\n        .print-format div, .print-format span, .print-format td{\r\n            font-family: \"Roboto\", sans-serif; !important\r\n            \r\n        }\r\n        .print-format, body, html { margin:0 !important; padding:0 !important; }\r\n        \r\n        .label {\r\n          width: 70mm; height: 15mm;\r\n          padding: 0;\r\n          box-sizing: border-box;\r\n          font-family: \"Roboto\", sans-serif; !important;\r\n          box-sizing: border-box;\r\n          overflow: hidden;\r\n          border: none !important; \r\n          page-break-inside: avoid; !important\r\n        }\r\n        table, th, td {\r\n            border: none;\r\n            padding: 0; !important\r\n        }\r\n        table.label-grid {\r\n          border-collapse: collapse;\r\n          /*border: none;*/\r\n          width: 70mm; height: 17mm;\r\n          table-layout: fixed;\r\n          padding-top: 1mm;\r\n        }\r\n        .col-left  { width: 25mm; padding: 0mm; vertical-align: middle; text-align: center;}\r\n        .col-mid   { width: 20mm; padding: 0 1mm; text-align: center; vertical-align: middle;}\r\n        .col-right { width: 25mm; padding: 0 1mm; text-align: center;  vertical-align: middle; !important}\r\n        \r\n        /* Matrix (canvas) sizing \u2014 square for best readability */\r\n        #matrix {\r\n          display: inline-block;\r\n          width: 16mm;   /* visual size on paper */\r\n          height: 4mm;  \r\n          margin: 2mm 0 1mm 0;\r\n          image-rendering: pixelated;\r\n        }\r\n        .matrix-text {\r\n            font-size: 9px;\r\n            text-transform: uppercase;\r\n            font-weight: 600;\r\n            line-height: 1;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            font-family: \"Roboto\", sans-serif;\r\n        }\r\n        .item-name {\r\n          font-size: 9px;\r\n          line-height: 1.0;\r\n          white-space: nowrap;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n        }\r\n        .price {\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n        }\r\n        .pagebreak { page-break-after: always; }\r\n    }\r\n    \r\n  </style>\r\n   <div class=\"label\">\r\n    <table class=\"label-grid\">\r\n      <tr>\r\n        <!-- Left: Data Matrix code -->\r\n        <td class=\"col-left\">\r\n          <canvas id=\"matrix\" style=\"margin-top: 14px\"></canvas>\r\n          <div id=\"matrixText\" class=\"matrix-text\"></div>\r\n        </td>\r\n\r\n        <!-- Middle: Item name -->\r\n        <td class=\"col-mid\">\r\n          <div id=\"itemName\" class=\"item-name\"></div>\r\n        </td>\r\n\r\n{% set price_doc = frappe.db.get_value(\r\n    \"Item Price\",\r\n    {\"item_code\": doc.name, \"price_list\": \"Standard Selling\"},\r\n    [\"price_list_rate\", \"currency\"],\r\n    as_dict=True\r\n) %}\r\n        <!-- Right: Price -->\r\n        <td class=\"col-right\">\r\n          <p id=\"pricee\" class=\"price\" style=\"margin-top: 14px\">{% if price_doc %}\r\n    {{ price_doc.price_list_rate }}{{ \" \" if price_doc.currency else \"\" }}{{ price_doc.currency or \"\" }}\r\n  {% endif %}</p>\r\n        </td>\r\n      </tr>\r\n    </table>\r\n  </div>\r\n  <!-- bwip-js (supports datamatrix, pdf417, aztec, etc.) -->\r\n  <script src=\"https://cdn.jsdelivr.net/npm/bwip-js@3.4.0/dist/bwip-js-min.js\"></script>\r\n  <script>\r\n      (async () => {\r\n  const ITEM_CODE   = \"{{ doc.name }}\";           // or {{ doc.item_code }}\r\n  const PRICE_LIST  = \"Standard Selling\";         // change to yours\r\n\r\n  const params = new URLSearchParams({\r\n    fields: JSON.stringify([\"name\",\"price_list_rate\",\"currency\",\"uom\",\"valid_from\"]),\r\n    filters: JSON.stringify([\r\n      [\"Item Price\",\"item_code\",\"=\", ITEM_CODE],\r\n      [\"Item Price\",\"price_list\",\"=\", PRICE_LIST],\r\n    ]),\r\n    order_by: \"valid_from desc, creation desc\",\r\n    limit_page_length: \"1\"\r\n  });\r\n\r\n  //const res  = await fetch(`/api/resource/Item%20Price?${params.toString()}`);\r\n  //const json = await res.json();\r\n  //const row  = (json && json.data && json.data[0]) || null;\r\n\r\n  //const el = document.getElementById(\"price\");\r\n  /*if (row && row.price_list_rate != null) {\r\n    const price = Number(row.price_list_rate).toFixed(0);\r\n    el.textContent = row.currency ? `${price} ${row.currency}` : price;\r\n   \r\n  } else {\r\n    el.textContent = \"\"; // fallback\r\n  }*/\r\n   \r\n})();\r\n    \r\n    // ---- Set your values here (or inject via Jinja) ----\r\n    const MATRIX_VALUE = `{{doc.barcodes[0].barcode}}`  // content to encode (ASCII OK)\r\n    \r\n    const ITEM_NAME    = \"\";             // optional\r\n\r\n    // Fill text fields\r\n    document.getElementById(\"itemName\").textContent = ITEM_NAME || \"\";\r\n    document.getElementById(\"matrixText\").textContent = MATRIX_VALUE;\r\n    \r\n\r\n    // Render Data Matrix into CANVAS\r\n    (function renderMatrix(){\r\n      const canvas = document.getElementById('matrix');\r\n\r\n      // For crisp output on 203 dpi: 1mm \u2248 8 dots. 16mm \u2248 128px.\r\n      const px = 16 * 8;      // 128 px square\r\n      canvas.width  = px;\r\n      canvas.height = px;\r\n\r\n      try {\r\n        // BWIPJS options: https://github.com/metafloor/bwip-js\r\n        bwipjs.toCanvas(canvas, {\r\n          bcid:        'datamatrixrectangular',   // symbology\r\n          text:        MATRIX_VALUE,\r\n          scale:       1,              // module pixel scale (adjust for density)\r\n          paddingwidth:  0,\r\n          paddingheight: 0,\r\n             \r\n        });\r\n      } catch (e) {\r\n        console.warn('Matrix render error:', e);\r\n      }\r\n    })();\r\n // Optional: auto-open print dialog\r\n   //window.onload = () => window.print();\r\n  </script>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-10-19 13:43:05.476731",
 "modified_by": "Administrator",
 "module": "Optics ERP",
 "name": "Frame Barcode Label",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "JS",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}